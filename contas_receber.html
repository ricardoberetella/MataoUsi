<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contas a Receber - Mat√£o Usinagem</title>

    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/pedidos_lista.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
/* ==============================================================
   ESTILOS PARA O PDF (Ativado via classe .modo-pdf no body)
============================================================== */
body.modo-pdf header,
body.modo-pdf .card:first-child,
body.modo-pdf button,
body.modo-pdf .btn-voltar {
    display: none !important;
}

body.modo-pdf {
    background: #fff !important;
    color: #000 !important;
    font-family: Arial, sans-serif;
}

body.modo-pdf .container {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
}

.cabecalho-pdf { display: none; }
body.modo-pdf .cabecalho-pdf { display: block; margin-bottom: 10px; }

.cabecalho-linha {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.logo-pdf img { height: 90px; }

.data-pdf {
    font-size: 10px;
    text-align: center;
    margin-top: 4px;
}

.titulo-pdf { text-align: center; flex-grow: 1; margin-right: 90px; }
.titulo-pdf h2 { margin: 0; font-size: 18px; color: #000; }
.titulo-pdf p { margin: 0; font-size: 12px; color: #333; }

body.modo-pdf table {
    width: 100%;
    border-collapse: collapse;
    font-size: 10px;
    margin-top: 15px;
}

body.modo-pdf thead th {
    background: #e5e7eb !important;
    color: #000 !important;
    border: 1px solid #000;
    padding: 8px;
    text-align: center;
}

body.modo-pdf td {
    border: 1px solid #000;
    padding: 6px;
    text-align: center;
    color: #000 !important;
}

/* Ocultar coluna de a√ß√µes no PDF */
body.modo-pdf th:last-child,
body.modo-pdf td:last-child { 
    display: none !important; 
}

/* ==============================================================
   ESTILOS DO MODAL E INTERFACE
============================================================== */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.75);
    z-index: 9999;
    padding: 16px;
    align-items: center;
    justify-content: center;
}
.modal.ativo { display: flex; }

.modal-conteudo {
    width: min(500px, 96vw);
    background: #0f172a;
    border: 1px solid rgba(56,189,248,.3);
    border-radius: 14px;
    padding: 24px;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
}

.modal-conteudo h3 { margin: 0 0 15px 0; color: #38bdf8; font-size: 1.4rem; }
.modal-conteudo label { display:block; margin: 12px 0 6px 0; color: #94a3b8; font-size: 14px; }
.modal-conteudo input {
    width: 100%; 
    padding: 12px; 
    border-radius: 8px;
    border: 1px solid #1e293b; 
    background: #020617; 
    color: #fff;
    outline: none;
}
.modal-conteudo input:focus { border-color: #38bdf8; }

.modal-acoes { display:flex; gap:10px; justify-content:flex-end; margin-top: 25px; }

.td-acoes { display:flex; gap:8px; justify-content:center; }
.btn-pagar { background: #10b981 !important; color: #fff !important; }
.btn-excluir-mini { background: #ef4444 !important; color: #fff !important; }

/* Status Cores */
.status-pago { color: #10b981; font-weight: bold; }
.status-aberto { color: #38bdf8; font-weight: bold; }
.status-vencido { color: #ef4444; font-weight: bold; text-decoration: underline; }

</style>
</head>

<body>

<header class="topbar">
    <a href="dashboard.html">
        <button class="btn-voltar">‚¨Ö Voltar ao Menu</button>
    </a>
    <h1 class="topbar-title">Contas a Receber</h1>
</header>

<div class="container" id="areaPdf">

    <div class="cabecalho-pdf">
        <div class="cabecalho-linha">
            <div class="logo-pdf">
                <img src="img/logo-mataousi.png" alt="Mat√£o Usinagem">
                <div class="data-pdf">Gerado em: <span id="dataHoraPdf"></span></div>
            </div>
            <div class="titulo-pdf">
                <h2>MAT√ÉO USINAGEM</h2>
                <p>Relat√≥rio Gerencial de Contas a Receber</p>
            </div>
        </div>
        <hr style="border: 0; border-top: 1px solid #eee; margin: 10px 0;">
    </div>

    <section class="card">
        <h2 class="card-title">Filtros de Busca</h2>
        <div class="form-grid">
            <div class="form-group">
                <label>Status</label>
                <select id="filtroStatus">
                    <option value="">Todos</option>
                    <option value="ABERTO">Aberto</option>
                    <option value="VENCIDO">Vencido</option>
                    <option value="PAGO">Pago</option>
                </select>
            </div>
            <div class="form-group">
                <label>Vencimento at√©</label>
                <input type="date" id="filtroVencimento">
            </div>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top: 15px;">
            <button id="btnFiltrar" class="btn-azul">üîç Filtrar</button>
            <button id="btnNovoManual" class="btn-verde">‚ûï Lan√ßamento Manual</button>
            <button id="btnGerarPDF" class="btn-primario" style="background: #6366f1;">üìÑ Gerar PDF</button>
        </div>
    </section>

    <section class="card">
        <h2 class="card-title">Lan√ßamentos Encontrados</h2>
        <div style="overflow-x: auto;">
            <table class="tabela-futurista">
                <thead>
                    <tr>
                        <th>NF / Origem</th>
                        <th>Valor</th>
                        <th>Vencimento</th>
                        <th>Status</th>
                        <th class="col-acoes">A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="listaReceber">
                    </tbody>
            </table>
        </div>
        
        <div style="margin-top:20px; padding: 15px; background: rgba(56,189,248,0.05); border-radius: 10px; text-align: right;">
            <span style="color: #94a3b8; font-size: 14px;">Total Filtrado:</span>
            <div id="totalReceber" style="font-size: 24px; font-weight: bold; color: #38bdf8;">R$ 0,00</div>
        </div>
    </section>
</div>

<div id="modalManual" class="modal">
    <div class="modal-conteudo">
        <h3 id="tituloModal">Novo Lan√ßamento Manual</h3>
        
        <label>NF / Origem / Cliente</label>
        <input type="text" id="origemManual" placeholder="Ex.: NF 5521 - Cliente X">
        
        <label>Valor (R$)</label>
        <input type="number" id="valorManual" step="0.01" placeholder="0.00">
        
        <label>Data de Vencimento</label>
        <input type="date" id="vencimentoManual">
        
        <div class="modal-acoes">
            <button id="btnCancelarManual" class="btn-vermelho" style="background: #475569;">Cancelar</button>
            <button id="btnSalvarManual" class="btn-verde">Salvar Lan√ßamento</button>
        </div>
    </div>
</div>

<script type="module" src="js/contas_receber.js"></script>

</body>
</html>
