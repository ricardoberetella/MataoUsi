<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Contas a Receber</title>

    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/pedidos_lista.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
/* =========================
   PDF – RELATÓRIO FINAL
========================= */
body.modo-pdf header,
body.modo-pdf .card:first-child,
body.modo-pdf button {
    display: none !important;
}

body.modo-pdf {
    background: #fff !important;
    color: #000 !important;
    font-family: Arial, sans-serif;
}

body.modo-pdf .container {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
}

.cabecalho-pdf { display: none; }
body.modo-pdf .cabecalho-pdf { display: block; margin-bottom: 10px; }

.cabecalho-linha {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.logo-pdf img { height: 70px; }

.data-pdf {
    font-size: 10px;
    text-align: center;
    margin-top: 4px;
}

.titulo-pdf h2 { margin: 0; font-size: 15px; }
.titulo-pdf p { margin: 0; font-size: 11px; }

body.modo-pdf table {
    width: 100%;
    border-collapse: collapse;
    font-size: 10px;
}
body.modo-pdf thead { display: table-header-group; }
body.modo-pdf tr { page-break-inside: avoid; }

body.modo-pdf thead th {
    background: #e5e7eb;
    color: #000;
    border: 1px solid #000;
    padding: 6px;
    text-align: center;
}
body.modo-pdf td {
    border: 1px solid #000;
    padding: 5px;
    text-align: center;
}
body.modo-pdf tr.vencido td {
    background: #fff !important;
    color: #000 !important;
    font-weight: bold !important;
}

body.modo-pdf th:last-child,
body.modo-pdf td:last-child { display: none !important; }

body.modo-pdf .logo-pdf img { height: 90px; }

body.modo-pdf .cabecalho-linha {
    display: grid;
    grid-template-columns: auto 1fr;
    align-items: center;
    column-gap: 20px;
}
body.modo-pdf .titulo-pdf { text-align: center; margin-right: 90px; }

.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.65);
    z-index: 9999;
    padding: 16px;
}
.modal.ativo { display: flex; align-items: center; justify-content: center; }

.modal-conteudo {
    width: min(520px, 96vw);
    background: rgba(15, 23, 42, .98);
    border: 1px solid rgba(56,189,248,.25);
    border-radius: 14px;
    padding: 16px;
}
.modal-conteudo h3 { margin: 0 0 12px 0; color: #38bdf8; }
.modal-conteudo label { display:block; margin: 10px 0 6px 0; opacity: .9; }
.modal-conteudo input {
    width: 100%; padding: 10px 12px; border-radius: 10px;
    border: 1px solid rgba(255,255,255,.12); background: rgba(255,255,255,.06); color: #fff;
}
.modal-acoes { display:flex; gap:10px; justify-content:flex-end; margin-top: 14px; }

.td-acoes { display:flex; gap:8px; justify-content:center; align-items:center; }
.btn-pagar { background: #ef4444 !important; color: #fff !important; }
</style>
</head>

<body>

<header class="topbar">
    <a href="dashboard.html">
        <button class="btn-voltar">⬅ Voltar ao Menu</button>
    </a>
    <h1 class="topbar-title">Contas a Receber</h1>
</header>

<div class="container" id="areaPdf">

    <div class="cabecalho-pdf">
        <div class="cabecalho-linha">
            <div class="logo-pdf">
                <img src="img/logo-mataousi2.png" alt="Matão Usinagem">
                <div class="data-pdf"><span id="dataHoraPdf"></span></div>
            </div>
            <div class="titulo-pdf">
                <h2>MATÃO USINAGEM</h2>
                <p>Relatório de Contas a Receber</p>
            </div>
        </div>
        <hr>
    </div>

    <section class="card">
        <h2 class="card-title">Filtros</h2>
        <div class="form-grid">
            <div class="form-group">
                <label>Status</label>
                <select id="filtroStatus">
                    <option value="">Todos</option>
                    <option value="ABERTO">Aberto</option>
                    <option value="VENCIDO">Vencido</option>
                    <option value="PAGO">Pago</option>
                </select>
            </div>
            <div class="form-group">
                <label>Vencimento até</label>
                <input type="date" id="filtroVencimento">
            </div>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap">
            <button id="btnFiltrar" class="btn-azul">Filtrar</button>
            <button id="btnNovoManual" class="btn-verde">+ Lançamento Manual</button>
            <button id="btnGerarPDF" class="btn-azul">Gerar PDF</button>
        </div>
    </section>

    <section class="card">
        <h2 class="card-title">Lançamentos</h2>
        <table>
            <thead>
                <tr>
                    <th>NF / Origem</th>
                    <th>Valor</th>
                    <th>Vencimento</th>
                    <th>Status</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody id="listaReceber"></tbody>
        </table>
        <div style="margin-top:10px; font-weight:bold">
            Total filtrado: <span id="totalReceber">R$ 0,00</span>
        </div>
    </section>
</div>

<div id="modalManual" class="modal">
    <div class="modal-conteudo">
        <h3 id="tituloModal">Novo Lançamento Manual</h3>
        <label>NF / Origem</label>
        <input type="text" id="origemManual" placeholder="Ex.: 6155C...">
        <label>Valor</label>
        <input type="number" id="valorManual" step="0.01">
        <label>Vencimento</label>
        <input type="date" id="vencimentoManual">
        <div class="modal-acoes">
            <button id="btnSalvarManual" class="btn-verde">Salvar</button>
            <button id="btnCancelarManual" class="btn-vermelho">Cancelar</button>
        </div>
    </div>
</div>

<script type="module" src="js/contas_receber.js"></script>
</body>
</html>
